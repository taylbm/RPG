###
### index.mako - this is the main page for the dashboard
###

<%!
    inherit_layout = True 
    layout_name = "layout.mako" 
    page_id = 'main-page'
    page_title = 'demo-page'
    page_classes = ''
%>

###
### inheritence chain
###

<%inherit file="page.mako" />

###
### namespaces
###

###
### blocks
###

<%block name="extra_header_markup">


<script type="text/javascript">
    tday=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
    tmonth=new Array("January","February","March","April","May","June","July","August","September","October","November","December");

    function GetClock(){
    var d=new Date();
    var nday=d.getUTCDay(),nmonth=d.getUTCMonth(),ndate=d.getUTCDate(),nyear=d.getUTCFullYear();
    if(nyear<1000) nyear+=1900;
    var d=new Date();
    var nhour=d.getUTCHours(),nmin=d.getUTCMinutes(),nsec=d.getUTCSeconds();
    if(nmin<=9) nmin="0"+nmin
    if(nsec<=9) nsec="0"+nsec;

    $('#clockbox-date').html(""+tday[nday]+", "+tmonth[nmonth]+" "+ndate+", "+nyear);
    $('#clockbox-time').html(""+nhour+":"+nmin+":"+nsec+" "+"UT");
    }

    window.onload=function(){
    GetClock();
    setInterval(GetClock,1000);
    }
</script>


<script>
    var current_wxstatus = new Array; current_wxstatus[1] = 'B'; current_wxstatus[2] = 'A';
    var RS_SUPER_RES = new Array();RS_SUPER_RES[2] = 'on';RS_SUPER_RES[4] = 'off';
    var RS_CMD = new Array();RS_CMD[0] = 'off';RS_CMD[1] = 'on';
    var RS_AVSET = new Array(); RS_AVSET[2] = 'on';RS_AVSET[4] = 'off';
    RS_TOGGLE = {'RS_SUPER_RES':RS_SUPER_RES,'RS_CMD':RS_CMD,'RS_AVSET':RS_AVSET};
	$(document).ready(function(){
		$(".control-item").css('background-color','#1F497D','color','#FFFFFF');
		$(".nav-item").css('background-color','#002060');

		$(".toggle").on('slidestop',function(){		
			var controlname = $(this).attr("id")
			var current = $(this).val();	
			var cancel;var confirmation;
			if (current=="on"){cancel = "off";confirmation = "on"}else{cancel="on";confirmation="off"}
			$("#popup-link").click();
			var child1 = $(this).find("option:first-child").html()
			var child2 = $(this).find("option:last-child").html()
			var displayname = $(this).attr("alt")
			if (current=="off"){
			$("#id-confirm").html('Are you sure you want to change '+displayname +' to '+child1+' ?')
			}
			else{$("#id-confirm").html('Are you sure you want to change '+displayname+' to '+child2+' ?')}
			$("#pop-cancel").on('click',function(){
				$("#"+controlname).val(cancel).slider('refresh')
			});			
			$("#pop-confirm").on('click',function(){
				if (current == "off"){
					if (displayname == "SAILS" || displayname  == "AVSET"){
					$("#contain"+controlname+" .ui-slider-label-a").text('Pending').attr('style','background-color:#FCFC23 !important')
					$("#"+controlname).slider('refresh')}
					}
				$("#"+controlname).val(confirmation).slider('refresh')	
			});

		});
		setInterval(function (){	
			$.getJSON("/update",function(data){
				if (data['RPG_dict']['RPG_SAILS']){$('#RPG_SAILS').val('on').slider('refresh')}
				else{$('#RPG_SAILS').val('off').slider('refresh')}
				if(data['RPG_dict']['auto_mode'][0]){$('#Precip_Switch_status').addClass('hide')}
				if(data['RPG_dict']['auto_mode'][1]){$('#Clear_Air_Switch_status').addClass('hide')}	
				$("#RS_VCP_NUMBER").html(data['RS_dict']['RS_VCP_NUMBER'])
				$("#perf_check_time").html(data['PMD_dict']['perf_check_time'][0]).css('background-color',data['PMD_dict']['perf_check_time'][1])
			});
			
			
		},1000);


		$('#refreshPage').click(function(){
			location.reload()
		});
		$('#prf_control').click(function(){
			window.location="/button?id=hci_prf"
			window.location="/"
		});	

		$('#enviro_data').click(function(){
			window.location="/button?id=hci_wind"
			window.location="/"
		});
		
	});
</script>

</%block>

###
### body
###

	

    <div id="content">
        <div data-role="navbar">
        	<ul>
        		<li><div style="font-size:12px;background-color:#DCDBD6;font-weight:bold" class="contain-clock"><div style="text-align:center" id="clockbox-date"></div><div style="text-align:center" class="center" id="clockbox-time"></div></div></li>
        		<li><a data-rel="back" style="position:relative;left:0px;top:0px" class="ui-btn-left ui-btn ui-btn-inline ui-btn-icon-left ui-icon-back" href="/#">Back</a></li>
        		<li><a rel="external" style="color:white" class="nav-item control-shadow" href="/shift_change_checklist">Shift Change Checklist</a></li>
        		<li><a id="prf_control" style="color:white" class="nav-item control-shadow" href="#">PRF Control</a></li>
        		<li><a id="enviro_data" style="color:white" class="nav-item control-shadow" href="#">Environmental Data</a></li>
        	</ul>
        </div>

	
	<a id="popup-link" data-transition="pop" href="#popupDialog" data-rel="popup" data-position-to="window"></a>
	<div data-role="popup" id="popupDialog" data-dismissible="false">
		<div class="ui-corner-top ui-header ui-bar-a" data-theme="a" data-role="header" role="banner">
			<h1 class="ui-title" role="heading">Confirm Action</h1>
	
		</div>
		<div class="ui-corner-bottom ui-content ui-body-d" data-theme="d" data-role="content" role="main">
			<h3 id="id-confirm" class="ui-title">Are you sure you want to change?</h3>
			<a id="pop-cancel"class="ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all-ui-btn-inline" data-theme="c" data-rel="back" data-inline="true" data-role="button" href="#" data-corners="true" data-shadows="true" data-iconshadow="true" data-wrapperrels="span">Cancel</a>
			<a id="pop-confirm" class="ui-btn ui-btn-up-b ui-shadow ui-btn-corner-all-ui-btn-inline" data-theme="b" data-transition="flow" data-rel="back" data-inline="true" data-role="button" href="#" data-corners="true" data-shadows="true" data-iconshadow="true" data-wrapperrels="span">Confirm</a>
		</div>
	</div>
            <div class="ui-body ui-body-a ui-corner-all center main-body" style="width:97%;background-color:#4bacc6" >
            	<div class="ui-grid-b">
			<div class="ui-block-a ui-btn ui-btn-inline ui-btn-notext ui-corner-all" style="background-color:#4bacc6">
				<div class="ui-grid-a">
					<a rel="external" class="ui-block-a" style="text-decoration : none; color : #000000;" href="/VCP">
						<button type="button" style="font-size:40px;background-color:#DCDBD6" data-theme="b">VCP</button>
					</a>
					<a rel="external" class="ui-block-b" style="text-decoration : none; color : #000000;" href="/VCP">
						<button id="RS_VCP_NUMBER" type="button" style="font-size:40px;background-color:white" data-theme="b">N/A</button>
					</a>
				</div>
	 			<div class="ui-grid-b center">
                                	<div class="ui-block-a">
                                        	<button type="button" style="height:40px;display:inline-block;font-size:12px;background-color:#DCDBD6" data-theme="b">PRF Mode</button>                                                                </div>
                                	<div class="ui-block-c">
                                        	<div style="display:block" class="containing-element">
                                                	<select class="toggle" alt="PRF Mode"  name="flip-min" id="PRF Mode" data-role="slider"data-theme="a">
                                                        	<option select value="off">MANUAL</option>
                                                        	<option value="on">MULTI</option>
                                                	</select>
                                       		 </div>
                               		 </div>
                       		 </div>
				 <div class="ui-grid-a center">
                                 	<div class="ui-block-a">
                                        	<button type="button" style="display:inline-block;font-size:11px;background-color:#DCDBD6" data-theme="b">AVSET</button>
                                        </div>
                                        <div class="ui-block-b">
                                        	<div style="display:inline-block" class="containing-element-lg">
                                                                                <select class="toggle" alt="AVSET Mismatch"  name="flip-min" id="AVSET_Alarm" data-role="slider"data-theme="a"data-mini="true">
                                                                                        <option select value="off">DISABLED</option>
                                                                                        <option value="on">ENABLED</option>
                                                                                </select>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                        <div class="ui-grid-a center">
                                                                <div class="ui-block-a">
                                                                        <button type="button" style="display:inline-block;font-size:11px;background-color:#DCDBD6;" data-theme="b">SAILS</button>
                                                                </div>
                                                                <div class="ui-block-b">
                                                                        <div style="display:inline-block" class="containing-element-lg">
                                                                                <select alt="SAILS Mismatch" class="toggle" name="flip-min" id="SAILS_Alarm" data-role="slider"data-theme="a"data-mini="true">
                                                                                        <option select value="off">DISABLED</option>
                                                                                        <option value="on">ENABLED</option>
                                                                                </select>
                                                                        </div>
                                                                </div>
                                                        </div>

						

						<div class="ui-grid-a center" style="width:80%;">
							<div class="ui-block-a">
								<div style="font-size:11px"class="bar-border1">Perf. Check in</div>
							</div>
							<div class="ui-block-b">
								<div id="perf_check_time" style="font-size:11px"class="bar-border2">-9999</div>
							</div>
						</div>
			</div>	
                    	<div class="ui-block-b ui-btn ui-btn-inline ui-btn-notext ui-corner-all" style="background-color:#4bacc6">

							<div class="ui-grid-a center">
								<div class="ui-block-a">
									<button type="button" id="Mode_Conflict" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Mode Conflict</button>
								</div>
								<div class="ui-block-b" id="Mode_Conflict_status">
									<button type="button" style="font-size:11px;background-color:#51FF22">NO</button>
								</div>

							</div>
 
							<div class="ui-grid-a center" id="Clear_Air_Switch_status">
								<div class="ui-block-a">
									<button type="button" id="Clear_Air_Switch" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Clear Air Switch</button>
								</div>
								<div class="ui-block-b" id="Clear Air Switch">
                            						<div style="float:left" class="containing-element">
										<select alt="Clear_Air_Switch" class="toggle" name="flip-min" id="Clear_Air_Switch" data-role="slider"data-theme="a"data-mini="true">
                                							<option select value="off">MANUAL</option>
                                							<option value="on">AUTO</option>
                                						</select>
                            						</div>
								</div>
							</div>
	 						<div class="ui-grid-a center" id="Precip_Switch_status">
								<div class="ui-block-a">
									<button type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Precip Switch</button>
								</div>
								<div class="ui-block-b">
                            						<div style="float:left" class="containing-element">
										<select alt="Precip_Switch" class="toggle" name="flip-min" id="Precip_Switch" data-role="slider"data-theme="a"data-mini="true">
                                							<option select value="off">MANUAL</option>
                                							<option id="Precip_Switch_label" value="on">AUTO</option>
                                						</select>
                            						</div>
								</div>
							</div>


						
		    </div>				
                    <div class="ui-block-c ui-btn ui-btn-inline ui-btn-notext ui-corner-all" style="background-color:#4bacc6">

							 <div class="ui-grid-a center" id="Precip_status">
                                                                <div class="ui-block-a">
                                                                        <button id="Precip" type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Precip Status</button>
                                                                </div>
                                                                <div class="ui-block-b">
									<button id="Precip_contain" type="button" style="font-size:11px;background-color:#51FF22" data-theme="b">ACCUM</button>
                                                                </div>
                                                        </div>
	

	 						<div class="ui-grid-a center" id="RS_SUPER_RES_status">
								<div class="ui-block-a">
									<button type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Super Res</button>
								</div>
								<div class="ui-block-b">
                            						<div id = "RS_SUPER_RES_contain"style="float:left" class="containing-element-lg">
										<select alt="Super Res" class="toggle" name="flip-min" id="RS_SUPER_RES" data-role="slider"data-theme="a"data-mini="true">
                                							<option value="off">DISABLED</option>
                                							<option value="on">ENABLED</option>
                                						</select>
                            						</div>
								</div>
							</div>
	 						<div class="ui-grid-a center" id="RS_CMD_status">
								<div class="ui-block-a">
									<button type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">CMD</button>
								</div>
								<div class="ui-block-b">
                            						<div id="RS_CMD_contain" style="float:left" class="containing-element-lg">
										<select alt="CMD" class="toggle" name="flip-min" id="RS_CMD" data-role="slider"data-theme="a"data-mini="true">
                                							<option select value="off">DISABLED</option>
                                							<option value="on">ENABLED</option>
                                						</select>
                            						</div>
								</div>
							</div>

	 						<div class="ui-grid-a center" id="Model_Update_status">
								<div class="ui-block-a">
									<button id="Model_Update" type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Model Update</button>
								</div>
								<div class="ui-block-b">
                            						<div id="Model_Update_contain" style="float:left" class="containing-element-lg">
										<select alt="CMD" class="toggle" name="flip-min" id="Model_Update" data-role="slider"data-theme="a"data-mini="true">
                                							<option select value="off">OFF</option>
                                							<option value="on">ON</option>
                                						</select>
                            						</div>
								</div>
							</div>

	 						<div class="ui-grid-a center" id="VAD_Update_status">
								<div class="ui-block-a">
									<button id="VAD_Update" type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">VAD Update</button>
								</div>
								<div class="ui-block-b">
                            						<div id="VAD_Update_contain" style="float:left" class="containing-element-lg">
										<select alt="VAD_update" class="toggle" name="flip-min" id="VAD_Update" data-role="slider"data-theme="a"data-mini="true">
                                							<option select value="off">OFF</option>
                                							<option value="on">ON</option>
                                						</select>
                            						</div>
								</div>
							</div>
							<div class="ui-grid-a center" id="Load_Shed_status">
                                                                <div class="ui-block-a">
                                                                        <button id="Load_Shed" type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">Load Shed</button>                                                               		       </div>
                                                                <div class="ui-block-b">
                                                                        <button id="Load_Shed_contain" type="button" style="font-size:11px;background-color:#51FF22" data-theme="b">NORMAL</button>
                                                                </div>
                                                        </div>
							<div class="ui-grid-a center" id="RDA_Messages_status">
                                                                <div class="ui-block-a">
                                                                        <button id="RDA_Messages" type="button" style="font-size:11px;background-color:#DCDBD6" data-theme="b">RDA Messages</button>
                                                                </div>
                                                                <div class="ui-block-b">
                                                                        <div id="RDA_Messages_contain" style="float:left" class="containing-element-lg">
                                                                                <select alt="RDA_Messages" class="toggle" name="flip-min" id="RDA_Messages" data-role="slider"data-theme="a"data-mini="true">
                                                                                        <option value="off">DISABLED</option>
                                                                                        <option select value="on">ENABLED</option>
                                                                                </select>
                                                                        </div>
                                                                </div>
                                                        </div>

	




    							
                				</div>
					</div>

					
                </div>
            </div>
	
	</div>
	



	


